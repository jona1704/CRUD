<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // Async/await
        /*
            Hay una sintaxis especial para trabajar con promesas en una
            manera más conveniente, llamada 'async/await'. Es sorprendemente
            fácil de entenderla y usarla.

            La palabra "async" antes de una función significa una simple cosa:
            un función siempre retorna una promesa.

            Entonces la palabra clave async es añadida a las funciones para decirles
            que retornen una promesa en vez de directamente retornar un valor.

            Podemos usar await cuando llamamos a cualquier función que retorna
            una Promesa, incluyendo funciones web API.

            La palabra clave await hace que JavaScript espere hasta que la promesa
            se active y retorne su resultado.
        */

        // task
        // API student

        // 1: 2s roll no
        // 2: 2s name and age

        // executor
        const pobj1 = new Promise((resolve, reject) =>{
            setTimeout(() => {
                let roll_no = [1, 2, 3, 4, 5];
                resolve(roll_no);
                //reject('Error while communicating');
            }, 2000);
        });

        const getBiodata = (indexdata) => {
            return new Promise((resolve, reject) => {
                setTimeout((indexdata) => {
                    let biodata = {
                        name: 'Jonathan',
                        age: 30
                    };
                    resolve(`My roll no. es ${indexdata}. My name is ${biodata.name} and 
                    I am ${biodata.age} years old.`);
                }, 2000, indexdata);
            });
        };

        // ... promise produce
        // pobj1
        //     .then((rollno) => {
        //         console.log(rollno);
        //         return getBiodata(rollno[1]);
                    
        //     }).then((msj) => {
        //         console.log(msj);
        //     })
        //     .catch((error) => {
        //         console.log(error);
        //     });

        async function getData(){
            const rollno_data = await pobj1;
            console.log(rollno_data);

            const biodata = await getBiodata(rollno_data[1]);
            console.log(biodata);

            return biodata;
        }

        const getname = getData().then((myname) => {
            console.log(getname);
        });
        


    </script>
</body>
</html>