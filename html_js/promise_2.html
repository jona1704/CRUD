<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // task
        // API student

        // 1: 2s roll no
        // 2: 2s name and age

        // Una función para ser ejecutada por el constructor, 
        // durante el proceso de construcción del promiseooBJ.
        // El ejecutor es un cósigo personzalizado que vicula un resultado
        // a la promesa. Tu, el programador, escribe el ejecutor.

        // resolveFunc(value) // Llamamos una aceptación
        // rejectFunc(reason) // Llamamos un rechazo o error
        
        // executor
        const pobj1 = new Promise((resolve, reject) =>{
            setTimeout(() => {
                let roll_no = [1, 2, 3, 4, 5];
                resolve(roll_no);
                //reject('Error while communicating');
            }, 2000);
        });

        const getBiodata = (indexdata) => {
            return new Promise((resolve, reject) => {
                setTimeout((indexdata) => {
                    let biodata = {
                        name: 'Jonathan',
                        age: 30
                    };
                    resolve(`My roll no. es ${indexdata}. My name is ${biodata.name} and 
                    I am ${biodata.age} years old.`);
                }, 2000, indexdata);
            });
        };

        // Los métodos promise.then(), promise.catch(), y 
        // promise.finally() son usados para asociar acciones con 
        // una promesa que llegan a ser establecidas.

        // ... promise produce
        pobj1
            .then((rollno) => {
                console.log(rollno);
                return getBiodata(rollno[1]);
                    
            }).then((msj) => {
                console.log(msj);
            })
            .catch((error) => {
                console.log(error);
            });
    </script>
</body>
</html>