<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Async-Await</title>
</head>
<body>
    <script>
        // const datos = [{
        //     id: 1,
        //     title: 'Iron Man',
        //     year: 2008
        // }, {
        //     id: 2,
        //     title: 'Spiderman: Homecoming',
        //     year: 2017
        // }, {
        //     id: 3,
        //     title: 'Avengers Engame',
        //     year: 2019
        // }];

        const datos = [];

        // const getDatos = () => {
        //     return datos;
        // }

        const getDatos = () => {
            return new Promise((resolve, reject) => {
                if(datos.length === 0){
                    reject(new Error('No existen datos'));
                }

                setTimeout(() => {
                    resolve(datos)
                }, 1500);
            })
            // setTimeout(() => {
            //     return datos; // Como no hay nada que hace que se resuelve retorna undefined
            // }, 1500);
        }

        // Promesas ejecutan un bloque de cÃ³digo y cuando este listo 
        // se devuelve
 
        //console.log(getDatos());
        // getDatos()
            //.then((datos) => {
        //     console.log(datos);
        // });

        async function fetchingData(){
            try{
                const datosFetched = await getDatos();
                console.log(datosFetched);
            } catch(err){
                console.log(err.message);
            }          
        }        

        fetchingData();
    </script>
</body>
</html>